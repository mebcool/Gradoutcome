{% extends "base.html" %}
{% block title %}View All Users{% endblock %}
{% block body %}
    <h1>All students</h1>
    <table>
        <thead>
            <tr>
                <th>Year Applied</th>
                <th>Student Name</th>
                <th>School Type</th>
                <th>School Name</th>
                <th>Accepted?</th>
                <th>Reapplied and Accepted (Same Field)</th>
                <th>Reapplied and Accepted (Diff Field)</th>
                <th>Actions</th>
            </tr>
        </thead>
<tbody>
    {% for student in students %}
        <tr>
            <td>{{ student.application.yearapplied }}</td>
            <td>{{ student.name }}</td>
            <td>{{ student.school.typeof if student.school else 'N/A' }}</td>
            <td>{{ student.school.name if student.school else 'N/A' }}</td>
            <td>{{ student.application.accepted }}</td>
            <td>{{ student.application.reapp_accepted_same_field }}</td>
            <td>{{ student.application.reapp_accepted_diff_field }}</td>
            <td>
                <a href="{{ url_for('updatestudent', id=student.id) }}">Update</a>
                <a href="{{ url_for('student_profile', id=student.id) }}">Profile</a>
                <button onclick="deleteStudent({{ student.id }})">Delete</button>
            </td>
        </tr>
    {% endfor %}
</tbody>
    </table>

    <script>
        function deleteStudent(studentId) {
            if (confirm("Are you sure you want to delete this student record?")) {
                window.location.href = "/deletestudent/" + studentId;
            }
        }
    </script>
{% endblock %}
